<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>直播辩论小程序 - 后台管理系统</title>
	<link rel="icon" href="/static/iconfont/zhibo.png">
	<link rel="stylesheet" href="/admin/styles.css">
	<link rel="stylesheet" href="/static/iconfont/iconfont.css">
	<style>
		/* 图标样式 */
		.icon-img {
			width: 20px;
			height: 20px;
			vertical-align: middle;
			margin-right: 8px;
			object-fit: contain;
		}
		.icon-img-sm {
			width: 16px;
			height: 16px;
		}
		.icon-img-lg {
			width: 24px;
			height: 24px;
		}
		.icon-inline {
			display: inline-block;
			vertical-align: middle;
		}
		/* 防止浏览器默认样式干扰 */
		a, a:link, a:visited, a:hover, a:active {
			text-decoration: none;
			color: inherit;
		}
	</style>
</head>
<body>
	<div id="app">
		<!-- 侧边栏 -->
		<aside class="sidebar">
			<div class="sidebar-header">
				<h2>
					<img src="/static/iconfont/zhibo.png" class="icon-img" alt="">
					直播辩论管理
				</h2>
			</div>
			<nav class="sidebar-nav">
				<a href="#dashboard" class="nav-item active" data-page="dashboard">
					<img src="/static/iconfont/shuju.png" class="nav-icon-img" alt="">
					<span class="nav-text">数据概览</span>
				</a>
				<a href="#stream-manage" class="nav-item" data-page="stream-manage">
					<img src="/static/iconfont/live.png" class="nav-icon-img" alt="">
					<span class="nav-text">直播流管理</span>
				</a>

				<a href="#users" class="nav-item" data-page="users">
					<img src="/static/iconfont/blue-user.png" class="nav-icon-img" alt="">
					<span class="nav-text">用户管理</span>
				</a>
				<a href="#votes" class="nav-item" data-page="votes">
					<img src="/static/iconfont/toupiao.png" class="nav-icon-img" alt="">
					<span class="nav-text">票数管理</span>
				</a>
			<a href="#judges" class="nav-item" data-page="judges">
				<img src="/static/iconfont/blue-user.png" class="nav-icon-img" alt="">
				<span class="nav-text">评委管理</span>
			</a>
			<a href="#debate-flow" class="nav-item" data-page="debate-flow">
				<img src="/static/iconfont/gongjigongju.png" class="nav-icon-img" alt="">
				<span class="nav-text">辩论流程</span>
			</a>
			<a href="#ai-content" class="nav-item" data-page="ai-content">
					<img src="/static/iconfont/gongjigongju.png" class="nav-icon-img" alt="">
					<span class="nav-text">AI 内容管理</span>
				</a>
				<a href="#statistics" class="nav-item" data-page="statistics">
					<img src="/static/iconfont/shuju.png" class="nav-icon-img" alt="">
					<span class="nav-text">数据统计</span>
				</a>
			</nav>
		</aside>

		<!-- 主内容区 -->
		<main class="main-content">
			<!-- 顶部栏 -->
			<header class="topbar">
				<h1 class="page-title"></h1>
				<div class="topbar-actions">
					<button class="btn btn-sm" id="control-live-btn" style="margin-right: 15px;">开始直播</button>
					<span class="status-indicator">
						<span class="status-dot"></span>
						<span id="live-status-text">未开播</span>
					</span>
				</div>
			</header>

			<!-- 页面内容 -->
			<div class="page-content">
			<!-- 数据概览页 -->
			<div id="dashboard" class="page active">
				<!-- 🔧 新增：多直播总览 -->
				<div class="multi-live-overview" style="background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%); padding: 25px; border-radius: 8px; margin-bottom: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border: 1px solid rgba(255,255,255,0.1);">
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
						<h3 style="margin: 0; color: white; font-size: 20px; font-weight: 600; display: flex; align-items: center; gap: 8px;">
							<img src="/static/iconfont/zhibo.png" class="icon-img" style="filter: brightness(0) invert(1);" alt="">
							多直播流总览
						</h3>
						<button class="btn btn-sm" style="background: rgba(255,255,255,0.15); color: white; border: 1px solid rgba(255,255,255,0.2); display: flex; align-items: center; gap: 6px; padding: 8px 16px; transition: all 0.3s;" onclick="refreshMultiLiveOverview()" onmouseover="this.style.background='rgba(255,255,255,0.25)'" onmouseout="this.style.background='rgba(255,255,255,0.15)'">
							<img src="/static/iconfont/shuaxin.png" class="icon-img-sm" style="filter: brightness(0) invert(1);" alt="">
							刷新
						</button>
					</div>
					<div id="multi-live-streams-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px;">
						<div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.7); grid-column: 1 / -1;">
							加载中...
						</div>
					</div>
				</div>
				
				<div class="stats-grid">
						<div class="stat-card">
							<div class="stat-icon">
								<img src="/static/iconfont/blue-user.png" alt="用户">
							</div>
							<div class="stat-info">
								<div class="stat-value" id="total-users">0</div>
								<div class="stat-label">总用户数</div>
							</div>
						</div>
						<div class="stat-card">
							<div class="stat-icon">
								<img src="/static/iconfont/zhibo.png" alt="直播">
							</div>
							<div class="stat-info">
								<div class="stat-value" id="live-status">未开播</div>
								<div class="stat-label">直播状态</div>
							</div>
						</div>
						<div class="stat-card">
							<div class="stat-icon">
								<img src="/static/iconfont/toupiao.png" alt="投票">
							</div>
							<div class="stat-info">
								<div class="stat-value" id="total-votes">0</div>
								<div class="stat-label">总投票数</div>
							</div>
						</div>
						<div class="stat-card">
							<div class="stat-icon">
								<img src="/static/iconfont/guankanrenshu.png" alt="在线">
							</div>
							<div class="stat-info">
								<div class="stat-value" id="active-users">0</div>
								<div class="stat-label">在线用户</div>
							</div>
						</div>
					</div>

					<div class="chart-section">
						<h3>实时投票趋势</h3>
						<canvas id="votes-chart"></canvas>
					</div>
				</div>

				<!-- 直播控制页 -->
				<div id="live-setup" class="page">
					<div class="page-header">
						<h2>
							<img src="/static/iconfont/zhibo.png" class="icon-img" alt="">
							直播控制
						</h2>
					</div>
					
					<!-- 直播状态显示 -->
					<div style="background: white; padding: 30px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
						<div style="text-align: center; margin-bottom: 30px;">
							<div style="font-size: 16px; color: #666; margin-bottom: 10px;">当前状态</div>
							<div id="live-control-status" style="font-size: 24px; font-weight: 600; color: #95a5a6; display: flex; align-items: center; justify-content: center; gap: 8px;">
								<span class="iconfont icon-circle" style="font-size: 20px;"></span>
								未开播
							</div>
						</div>
						
					<!-- 直播流选择 -->
					<div style="background: white; padding: 25px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
						<h4 style="margin: 0 0 15px 0; color: #333; display: flex; align-items: center; gap: 8px;">
							<img src="/static/iconfont/live.png" class="icon-img" alt="">
							选择直播流
						</h4>
						<div style="display: flex; flex-direction: column; gap: 10px;">
							<label style="font-size: 14px; color: #666; margin-bottom: 5px;">直播流:</label>
							<select id="stream-select" style="padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; background: white; cursor: pointer;">
								<option value="">加载中...</option>
							</select>
							<div style="margin-top: 8px; padding: 10px; background: #d4edda; border-radius: 6px; font-size: 13px; color: #155724; border-left: 3px solid #27ae60; display: flex; align-items: center; gap: 6px;">
								<span class="iconfont icon-tip" style="font-size: 16px;"></span>
								提示：可以选择不同的直播流进行管理，支持同时开启多个直播流
							</div>
							<div id="selected-stream-info" style="margin-top: 10px; padding: 10px; background: #f5f5f5; border-radius: 6px; font-size: 13px; color: #666; display: none;">
								<div><strong>流名称:</strong> <span id="selected-stream-name">-</span></div>
								<div style="margin-top: 5px;"><strong>流地址:</strong> <span id="selected-stream-url" style="font-family: monospace; word-break: break-all;">-</span></div>
								<div style="margin-top: 5px;"><strong>类型:</strong> <span id="selected-stream-type">-</span></div>
							</div>
						</div>
					</div>
					
					<!-- 直播流信息 -->
					<div id="live-stream-info" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; display: none; border: 1px solid #e9ecef;">
						<h4 style="margin: 0 0 15px 0; color: #333; display: flex; align-items: center; gap: 8px;">
							<img src="/static/iconfont/zhibo.png" class="icon-img" alt="">
							当前直播信息
						</h4>
						<div style="display: grid; grid-template-columns: auto 1fr; gap: 10px 20px; font-size: 14px;">
							<div style="color: #666;">直播ID:</div>
							<div id="live-stream-id" style="color: #333; font-family: monospace;">-</div>
							<div style="color: #666;">流地址:</div>
							<div id="live-stream-url" style="color: #333; font-family: monospace; word-break: break-all;">-</div>
							<div style="color: #666;">开始时间:</div>
							<div id="live-start-time" style="color: #333;">-</div>
						</div>
					</div>
					
					<!-- 控制按钮 -->
					<div style="display: flex; gap: 15px; justify-content: center;">
							<button class="btn btn-success" id="admin-start-live-btn" style="padding: 15px 40px; font-size: 18px; font-weight: bold; display: flex; align-items: center; gap: 8px; justify-content: center;">
								<img src="/static/iconfont/bofang.png" class="icon-img-sm" style="filter: brightness(0) invert(1);" alt="">
								开始直播
							</button>
							<button class="btn btn-danger" id="admin-stop-live-btn" style="padding: 15px 40px; font-size: 18px; font-weight: bold; display: flex; align-items: center; gap: 8px; justify-content: center;" disabled>
								<span class="iconfont icon-stop" style="font-size: 16px;"></span>
								停止直播
							</button>
						</div>
						
						<!-- 选项 -->
						<div style="margin-top: 25px; padding-top: 25px; border-top: 1px solid #eee; text-align: center;">
							<label style="display: inline-flex; align-items: center; gap: 10px; cursor: pointer; user-select: none;">
								<input type="checkbox" id="auto-start-ai-checkbox" style="width: 18px; height: 18px; cursor: pointer; pointer-events: auto; position: relative; z-index: 1; margin: 0; flex-shrink: 0;">
								<span style="font-size: 14px; color: #666;">开始直播时自动启动AI识别</span>
							</label>
						</div>
					</div>

					<!-- 所有直播流状态列表 - 显示每个直播流的开始与停止情况 -->
					<div id="streams-status-container" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-top: 20px;">
						<h4 style="margin: 0 0 20px 0; color: #333; display: flex; align-items: center; gap: 8px;">
							<img src="/static/iconfont/shuju.png" class="icon-img" alt="">
							所有直播流状态
						</h4>
						<div id="all-streams-status" style="display: flex; flex-direction: column; gap: 15px;">
							<div style="text-align: center; padding: 20px; color: #999;">
								<text>加载中...</text>
							</div>
						</div>
					</div>
				</div>

				<!-- 直播流管理页 -->
				<div id="stream-manage" class="page">
					<div class="page-header">
						<h2>
							<img src="/static/iconfont/live.png" class="icon-img" alt="">
							直播流管理
						</h2>
						<button class="btn btn-primary" id="add-stream-btn" style="display: flex; align-items: center; gap: 6px;">
							<span class="iconfont icon-plus" style="font-size: 16px;"></span>
							添加直播流
						</button>
					</div>

					<!-- 直播流列表 -->
					<div class="table-container" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
						<table class="data-table">
							<thead>
								<tr>
									<th>流名称</th>
									<th>流地址</th>
									<th>类型</th>
									<th>辩题</th>
									<th>状态</th>
									<th>创建时间</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody id="streams-table-body">
								<tr>
									<td colspan="7" style="text-align: center; padding: 40px; color: #999;">
										暂无直播流，请点击"添加直播流"按钮
									</td>
								</tr>
							</tbody>
						</table>
					</div>

					<!-- 使用说明 -->
					<div style="background: #d1ecf1; padding: 20px; border-radius: 8px; border-left: 4px solid #3498db; margin-top: 20px;">
						<h4 style="margin: 0 0 10px 0; color: #0c5460; display: flex; align-items: center; gap: 8px;">
							<span class="iconfont icon-help" style="font-size: 18px;"></span>
							使用指南
						</h4>
						<div style="color: #666; font-size: 14px; line-height: 1.8;">
							<p><strong>支持的直播流格式：</strong></p>
							<ul style="margin: 10px 0; padding-left: 20px;">
								<li><strong>HLS (推荐)</strong>: https://your-domain.com/live/stream.m3u8</li>
								<li><strong>RTMP</strong>: rtmp://your-domain.com/live/stream</li>
								<li><strong>FLV</strong>: https://your-domain.com/live/stream.flv</li>
							</ul>
							<p style="margin-top: 15px;"><strong>快速开始：</strong></p>
							<ol style="margin: 10px 0; padding-left: 20px;">
								<li>点击"添加直播流"按钮</li>
								<li>填写流名称和流地址（HLS格式）</li>
								<li>保存后，在"直播控制"页面选择该流</li>
								<li>点击"开始直播"即可推送到小程序</li>
							</ol>
							<p style="margin-top: 15px; background: #fff3cd; padding: 10px; border-radius: 4px; border-left: 3px solid #ffc107; display: flex; align-items: center; gap: 6px;">
								<span class="iconfont icon-tip" style="font-size: 16px;"></span>
								<strong>提示</strong>：微信小程序要求使用HTTPS协议的HLS流地址（.m3u8）
							</p>
						</div>
					</div>
				</div>

				<!-- 用户管理页 -->
				<div id="users" class="page">
					<div class="page-header">
						<h2>用户管理</h2>
						<div class="search-box">
							<input type="text" id="user-search" class="search-input" placeholder="搜索用户...">
						</div>
					</div>

					<div class="table-container">
						<table class="data-table">
							<thead>
								<tr>
									<th>用户ID</th>
									<th>昵称</th>
									<th>头像</th>
									<th>注册时间</th>
									<th>状态</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody id="users-table-body">
								<!-- 用户列表将通过JS动态生成 -->
							</tbody>
						</table>
					</div>
				</div>

			<!-- 票数管理页 -->
			<div id="votes" class="page">
				<div class="page-header">
					<h2>票数管理</h2>
					<a href="/admin/vote-display.html" target="_blank" class="btn btn-primary" style="display: flex; align-items: center; gap: 6px; text-decoration: none;">
						<img src="/static/iconfont/zhibo.png" class="icon-img-sm" style="filter: brightness(0) invert(1);" alt="">
						打开大屏幕
					</a>
				</div>
					
					<!-- 🔧 新增：直播流选择器 -->
					<div style="background: #d1ecf1; padding: 20px; border-radius: 8px; margin-bottom: 25px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border-left: 4px solid #3498db; border: 1px solid #bee5eb;">
						<div class="form-group" style="margin: 0;">
							<label style="display: block; margin-bottom: 10px; color: #0c5460; font-weight: 600; font-size: 16px; display: flex; align-items: center; gap: 8px;">
								<img src="/static/iconfont/live.png" class="icon-img" alt="">
								选择直播流
								<span style="color: #e74c3c; margin-left: 5px;">*</span>
							</label>
							<div style="display: flex; gap: 10px; align-items: center;">
								<select id="votes-stream-select" class="form-select" style="flex: 1; padding: 12px; font-size: 14px;">
									<option value="">请选择要管理的直播流</option>
								</select>
								<button class="btn btn-secondary btn-sm" id="votes-refresh-streams-btn" style="padding: 12px 20px; display: flex; align-items: center; gap: 6px;">
									<img src="/static/iconfont/shuaxin.png" class="icon-img-sm" alt="">
									刷新列表
								</button>
							</div>
							<div id="votes-current-stream-info" style="margin-top: 12px; padding: 10px; background: rgba(52, 152, 219, 0.1); border-radius: 6px; font-size: 13px; color: #0c5460; display: none;">
								<span style="font-weight: 600;">当前管理：</span>
								<span id="votes-current-stream-name">-</span>
								<span style="color: #6c757d; margin-left: 10px;">|</span>
								<span style="color: #6c757d; margin-left: 10px;">状态：</span>
								<span id="votes-current-stream-status">-</span>
							</div>
							<div style="margin-top: 8px; font-size: 13px; color: #6c757d; display: flex; align-items: center; gap: 6px;">
								<span class="iconfont icon-tip" style="font-size: 16px;"></span>
								提示：票数管理将作用于选中的直播流，每个流有独立的投票数据
							</div>
						</div>
					</div>
					
					<!-- 当前票数显示 -->
					<div style="margin-bottom: 30px;">
						<h3 style="margin-bottom: 20px; color: #2c3e50; display: flex; align-items: center; gap: 8px;">
							<img src="/static/iconfont/shuju.png" class="icon-img" alt="">
							当前票数
						</h3>
						<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
							<div style="padding: 25px; border: 2px solid #27ae60; border-radius: 8px; text-align: center; background: #d4edda;">
								<h4 style="margin: 0 0 10px 0; color: #495057; display: flex; align-items: center; justify-content: center; gap: 6px;">
									<img src="/static/iconfont/fangyudunpai-.png" class="icon-img-sm" alt="">
									正方票数
								</h4>
								<div id="admin-left-votes" style="font-size: 42px; font-weight: 600; color: #27ae60; margin: 10px 0;">0</div>
							</div>
							<div style="padding: 25px; border: 2px solid #3498db; border-radius: 8px; text-align: center; background: #d1ecf1;">
								<h4 style="margin: 0 0 10px 0; color: #495057; display: flex; align-items: center; justify-content: center; gap: 6px;">
									<img src="/static/iconfont/fangyudunpai-.png" class="icon-img-sm" alt="">
									反方票数
								</h4>
								<div id="admin-right-votes" style="font-size: 42px; font-weight: 600; color: #3498db; margin: 10px 0;">0</div>
							</div>
							<div style="padding: 25px; border: 2px solid #34495e; border-radius: 8px; text-align: center; background: #ecf0f1;">
								<h4 style="margin: 0 0 10px 0; color: #495057; display: flex; align-items: center; justify-content: center; gap: 6px;">
									<img src="/static/iconfont/toupiao.png" class="icon-img-sm" alt="">
									总票数
								</h4>
								<div id="admin-total-votes" style="font-size: 42px; font-weight: 600; color: #34495e; margin: 10px 0;">0</div>
								<div id="admin-vote-percentage" style="margin-top: 10px; color: #6c757d; font-size: 14px;">正方: 50% | 反方: 50%</div>
							</div>
						</div>
					</div>
					
					<!-- 功能一：手动设置票数 -->
					<div style="background: white; padding: 25px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e9ecef;">
						<h3 style="margin: 0 0 20px 0; color: #2c3e50; display: flex; align-items: center; gap: 8px;">
							<span class="iconfont icon-edit" style="font-size: 18px;"></span>
							功能一：手动设置票数
						</h3>
						<p style="color: #6c757d; margin-bottom: 20px;">直接设置正方和反方的票数（会覆盖原有数据）</p>
						<div style="display: grid; grid-template-columns: 1fr 1fr 2fr; gap: 15px; align-items: end;">
							<div class="form-group">
								<label>正方票数</label>
								<input type="number" id="set-left-votes" class="form-input" placeholder="例如：30000" min="0">
							</div>
							<div class="form-group">
								<label>反方票数</label>
								<input type="number" id="set-right-votes" class="form-input" placeholder="例如：20000" min="0">
							</div>
							<div class="form-group">
								<label>调整原因（可选）</label>
								<input type="text" id="set-votes-reason" class="form-input" placeholder="例如：数据校正">
							</div>
						</div>
						<button class="btn btn-primary" id="set-votes-btn" style="margin-top: 15px; padding: 12px 30px; display: flex; align-items: center; gap: 6px; justify-content: center;">
							<span class="iconfont icon-check" style="font-size: 16px;"></span>
							设置票数
						</button>
					</div>
					
					<!-- 功能二：增加票数 -->
					<div style="background: white; padding: 25px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e9ecef;">
						<h3 style="margin: 0 0 20px 0; color: #2c3e50; display: flex; align-items: center; gap: 8px;">
							<span class="iconfont icon-plus" style="font-size: 18px;"></span>
							功能二：增加票数
						</h3>
						<p style="color: #6c757d; margin-bottom: 20px;">在当前票数基础上增加（累加）</p>
						<div style="display: grid; grid-template-columns: 1fr 1fr 2fr; gap: 15px; align-items: end;">
							<div class="form-group">
								<label>增加正方票数</label>
								<input type="number" id="add-left-votes" class="form-input" placeholder="例如：1000" min="0">
							</div>
							<div class="form-group">
								<label>增加反方票数</label>
								<input type="number" id="add-right-votes" class="form-input" placeholder="例如：500" min="0">
							</div>
							<div class="form-group">
								<label>调整原因（可选）</label>
								<input type="text" id="add-votes-reason" class="form-input" placeholder="例如：补偿票数">
							</div>
						</div>
						<button class="btn btn-success" id="add-votes-btn" style="margin-top: 15px; padding: 12px 30px; display: flex; align-items: center; gap: 6px; justify-content: center;">
							<span class="iconfont icon-plus" style="font-size: 16px;"></span>
							增加票数
						</button>
					</div>
					
					<!-- 功能三：重置票数 -->
					<div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e9ecef;">
						<h3 style="margin: 0 0 20px 0; color: #2c3e50; display: flex; align-items: center; gap: 8px;">
							<span class="iconfont icon-refresh" style="font-size: 18px;"></span>
							功能三：重置票数
						</h3>
						<p style="color: #6c757d; margin-bottom: 20px;">将票数重置为初始值（会自动备份当前数据）</p>
						<div style="display: grid; grid-template-columns: 1fr 1fr 2fr; gap: 15px; align-items: end;">
							<div class="form-group">
								<label>重置为正方票数</label>
								<input type="number" id="reset-left-votes" class="form-input" placeholder="默认：0" min="0" value="0">
							</div>
							<div class="form-group">
								<label>重置为反方票数</label>
								<input type="number" id="reset-right-votes" class="form-input" placeholder="默认：0" min="0" value="0">
							</div>
							<div style="display: flex; align-items: center; gap: 10px;">
								<button class="btn btn-danger" id="reset-votes-btn" style="padding: 12px 30px; display: flex; align-items: center; gap: 6px; justify-content: center;">
									<span class="iconfont icon-refresh" style="font-size: 16px;"></span>
									重置票数
								</button>
								<span style="color: #6c757d; font-size: 12px; display: flex; align-items: center; gap: 4px;">
									<span class="iconfont icon-warning" style="font-size: 14px;"></span>
									当前数据会被备份
								</span>
							</div>
						</div>
					</div>
				</div>

				<!-- 评委管理页 -->
				<div id="judges" class="page">
					<div class="page-header">
						<h2>
							<img src="/static/iconfont/blue-user.png" class="icon-img" alt="">
							评委管理
						</h2>
						<a href="/admin/vote-display.html" target="_blank" class="btn btn-primary" style="display: flex; align-items: center; gap: 6px; text-decoration: none;">
							<img src="/static/iconfont/zhibo.png" class="icon-img-sm" style="filter: brightness(0) invert(1);" alt="">
							查看大屏幕
						</a>
					</div>

					<!-- 直播流选择器 -->
					<div style="background: #d1ecf1; padding: 20px; border-radius: 8px; margin-bottom: 25px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border-left: 4px solid #3498db; border: 1px solid #bee5eb;">
						<div class="form-group" style="margin: 0;">
							<label style="display: block; margin-bottom: 10px; color: #0c5460; font-weight: 600; font-size: 16px; display: flex; align-items: center; gap: 8px;">
								<img src="/static/iconfont/live.png" class="icon-img" alt="">
								选择直播流
								<span style="color: #e74c3c; margin-left: 5px;">*</span>
							</label>
							<div style="display: flex; gap: 10px; align-items: center;">
								<select id="judges-stream-select" class="form-select" style="flex: 1; padding: 12px; font-size: 14px;">
									<option value="">请选择要管理的直播流</option>
								</select>
								<button class="btn btn-secondary btn-sm" id="judges-refresh-streams-btn" style="padding: 12px 20px; display: flex; align-items: center; gap: 6px;">
									<img src="/static/iconfont/shuaxin.png" class="icon-img-sm" alt="">
									刷新列表
								</button>
							</div>
							<div id="judges-current-stream-info" style="margin-top: 12px; padding: 10px; background: rgba(52, 152, 219, 0.1); border-radius: 6px; font-size: 13px; color: #0c5460; display: none;">
								<span style="font-weight: 600;">当前管理：</span>
								<span id="judges-current-stream-name">-</span>
							</div>
							<div style="margin-top: 8px; font-size: 13px; color: #6c757d; display: flex; align-items: center; gap: 6px;">
								<span class="iconfont icon-tip" style="font-size: 16px;"></span>
								提示：每个直播流可以设置独立的评委信息
							</div>
						</div>
					</div>

					<!-- 当前评委展示 -->
					<div style="background: white; padding: 25px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e9ecef;">
						<h3 style="margin: 0 0 20px 0; color: #2c3e50; display: flex; align-items: center; gap: 8px;">
							<img src="/static/iconfont/blue-user.png" class="icon-img" alt="">
							当前评委设置
						</h3>

						<div id="judges-cards-container" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
							<!-- 评委1 -->
							<div class="judge-edit-card" data-judge-index="0" style="background: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #e9ecef;">
								<div style="text-align: center; margin-bottom: 15px;">
									<h4 style="margin: 0 0 10px 0; color: #495057;">评委一</h4>
									<div class="judge-avatar-preview" style="width: 120px; height: 120px; margin: 0 auto; border-radius: 50%; border: 3px solid #e9ecef; background-size: cover; background-position: center; background-image: url('./assets/images/judges/osmanthus.jpg'); background-color: #f5f5f5; position: relative; overflow: hidden; cursor: pointer;">
										<div class="avatar-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; color: white; font-size: 12px;">
											点击上传
										</div>
									</div>
								</div>
								<div class="form-group">
									<label>姓名</label>
									<input type="text" class="form-input judge-name-input" placeholder="请输入评委姓名" value="评委一">
								</div>
								<div class="form-group">
									<label>职位</label>
									<input type="text" class="form-input judge-role-input" placeholder="请输入职位" value="主评委">
								</div>
								<div class="form-group">
									<label>头像</label>
									<div style="display: flex; gap: 10px;">
										<input type="file" class="judge-avatar-upload" accept="image/*" style="display: none;">
										<button class="btn btn-secondary btn-sm upload-avatar-btn" style="flex: 1;">
											<span class="iconfont icon-upload" style="margin-right: 4px;"></span>
											上传头像
										</button>
										<button class="btn btn-info btn-sm select-from-users-btn" style="flex: 1;">
											<span class="iconfont icon-user" style="margin-right: 4px;"></span>
											从用户选择
										</button>
									</div>
								</div>
								<div class="form-group">
									<label>票数</label>
									<input type="number" class="form-input judge-votes-input" placeholder="当前票数" value="0" min="0">
								</div>
							</div>

							<!-- 评委2 -->
							<div class="judge-edit-card" data-judge-index="1" style="background: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #e9ecef;">
								<div style="text-align: center; margin-bottom: 15px;">
									<h4 style="margin: 0 0 10px 0; color: #495057;">评委二</h4>
									<div class="judge-avatar-preview" style="width: 120px; height: 120px; margin: 0 auto; border-radius: 50%; border: 3px solid #e9ecef; background-size: cover; background-position: center; background-image: url('./assets/images/judges/osmanthus.jpg'); background-color: #f5f5f5; position: relative; overflow: hidden; cursor: pointer;">
										<div class="avatar-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; color: white; font-size: 12px;">
											点击上传
										</div>
									</div>
								</div>
								<div class="form-group">
									<label>姓名</label>
									<input type="text" class="form-input judge-name-input" placeholder="请输入评委姓名" value="评委二">
								</div>
								<div class="form-group">
									<label>职位</label>
									<input type="text" class="form-input judge-role-input" placeholder="请输入职位" value="嘉宾评委">
								</div>
								<div class="form-group">
									<label>头像</label>
									<div style="display: flex; gap: 10px;">
										<input type="file" class="judge-avatar-upload" accept="image/*" style="display: none;">
										<button class="btn btn-secondary btn-sm upload-avatar-btn" style="flex: 1;">
											<span class="iconfont icon-upload" style="margin-right: 4px;"></span>
											上传头像
										</button>
										<button class="btn btn-info btn-sm select-from-users-btn" style="flex: 1;">
											<span class="iconfont icon-user" style="margin-right: 4px;"></span>
											从用户选择
										</button>
									</div>
								</div>
								<div class="form-group">
									<label>票数</label>
									<input type="number" class="form-input judge-votes-input" placeholder="当前票数" value="0" min="0">
								</div>
							</div>

							<!-- 评委3 -->
							<div class="judge-edit-card" data-judge-index="2" style="background: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #e9ecef;">
								<div style="text-align: center; margin-bottom: 15px;">
									<h4 style="margin: 0 0 10px 0; color: #495057;">评委三</h4>
									<div class="judge-avatar-preview" style="width: 120px; height: 120px; margin: 0 auto; border-radius: 50%; border: 3px solid #e9ecef; background-size: cover; background-position: center; background-image: url('./assets/images/judges/osmanthus.jpg'); background-color: #f5f5f5; position: relative; overflow: hidden; cursor: pointer;">
										<div class="avatar-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; color: white; font-size: 12px;">
											点击上传
										</div>
									</div>
								</div>
								<div class="form-group">
									<label>姓名</label>
									<input type="text" class="form-input judge-name-input" placeholder="请输入评委姓名" value="评委三">
								</div>
								<div class="form-group">
									<label>职位</label>
									<input type="text" class="form-input judge-role-input" placeholder="请输入职位" value="嘉宾评委">
								</div>
								<div class="form-group">
									<label>头像</label>
									<div style="display: flex; gap: 10px;">
										<input type="file" class="judge-avatar-upload" accept="image/*" style="display: none;">
										<button class="btn btn-secondary btn-sm upload-avatar-btn" style="flex: 1;">
											<span class="iconfont icon-upload" style="margin-right: 4px;"></span>
											上传头像
										</button>
										<button class="btn btn-info btn-sm select-from-users-btn" style="flex: 1;">
											<span class="iconfont icon-user" style="margin-right: 4px;"></span>
											从用户选择
										</button>
									</div>
								</div>
								<div class="form-group">
									<label>票数</label>
									<input type="number" class="form-input judge-votes-input" placeholder="当前票数" value="0" min="0">
								</div>
							</div>
						</div>

						<!-- 保存按钮 -->
						<div style="margin-top: 30px; text-align: center;">
							<button class="btn btn-success" id="save-judges-btn" style="padding: 12px 40px; font-size: 16px; display: inline-flex; align-items: center; gap: 8px;">
								<span class="iconfont icon-check" style="font-size: 18px;"></span>
								保存评委信息
							</button>
						</div>
					</div>

					<!-- 使用说明 -->
					<div style="background: #fff3cd; padding: 20px; border-radius: 8px; border-left: 4px solid #ffc107;">
						<h4 style="margin: 0 0 10px 0; color: #856404; display: flex; align-items: center; gap: 8px;">
							<span class="iconfont icon-help" style="font-size: 18px;"></span>
							使用说明
						</h4>
						<div style="color: #856404; font-size: 14px; line-height: 1.8;">
							<ul style="margin: 10px 0; padding-left: 20px;">
								<li>为每个评委设置姓名、职位和头像</li>
								<li>可以直接上传图片作为头像，或从已有用户中选择</li>
								<li>评委票数可以手动设置，也会实时同步观众投票</li>
								<li>保存后将同步更新到大屏幕显示页面</li>
								<li>每个直播流可以设置不同的评委信息</li>
							</ul>
						</div>
					</div>
				</div>

				<!-- 辩论流程管理页 -->
				<div id="debate-flow" class="page">
					<div class="page-header">
						<h2>
							<img src="/static/iconfont/gongjigongju.png" class="icon-img" alt="">
							辩论流程管理
						</h2>
						<a href="/admin/vote-display.html" target="_blank" class="btn btn-primary" style="display: flex; align-items: center; gap: 6px; text-decoration: none;">
							<img src="/static/iconfont/zhibo.png" class="icon-img-sm" style="filter: brightness(0) invert(1);" alt="">
							查看大屏幕
						</a>
					</div>

					<!-- 直播流选择器 -->
					<div style="background: #d1ecf1; padding: 20px; border-radius: 8px; margin-bottom: 25px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border-left: 4px solid #3498db; border: 1px solid #bee5eb;">
						<div class="form-group" style="margin: 0;">
							<label style="display: block; margin-bottom: 10px; color: #0c5460; font-weight: 600; font-size: 16px; display: flex; align-items: center; gap: 8px;">
								<img src="/static/iconfont/live.png" class="icon-img" alt="">
								选择直播流
								<span style="color: #e74c3c; margin-left: 5px;">*</span>
							</label>
							<div style="display: flex; gap: 10px; align-items: center;">
								<select id="debate-flow-stream-select" class="form-select" style="flex: 1; padding: 12px; font-size: 14px;">
									<option value="">请选择要管理的直播流</option>
								</select>
								<button class="btn btn-secondary btn-sm" id="debate-flow-refresh-streams-btn" style="padding: 12px 20px; display: flex; align-items: center; gap: 6px;">
									<img src="/static/iconfont/shuaxin.png" class="icon-img-sm" alt="">
									刷新列表
								</button>
							</div>
							<div id="debate-flow-current-stream-info" style="margin-top: 12px; padding: 10px; background: rgba(52, 152, 219, 0.1); border-radius: 6px; font-size: 13px; color: #0c5460; display: none;">
								<span style="font-weight: 600;">当前管理：</span>
								<span id="debate-flow-current-stream-name">-</span>
							</div>
							<div style="margin-top: 8px; font-size: 13px; color: #6c757d; display: flex; align-items: center; gap: 6px;">
								<span class="iconfont icon-tip" style="font-size: 16px;"></span>
								提示：每个直播流可以设置独立的辩论流程和时间
							</div>
						</div>
					</div>

					<!-- 流程配置 -->
					<div style="background: white; padding: 25px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e9ecef;">
						<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
							<h3 style="margin: 0; color: #2c3e50; display: flex; align-items: center; gap: 8px;">
								<img src="/static/iconfont/gongjigongju.png" class="icon-img" alt="">
								当前流程设置
							</h3>
							<button class="btn btn-info btn-sm" id="add-segment-btn" style="display: flex; align-items: center; gap: 6px;">
								<span class="iconfont icon-plus" style="font-size: 16px;">➕</span>
								添加环节
							</button>
						</div>

						<div id="debate-segments-container" style="display: flex; flex-direction: column; gap: 15px;">
							<!-- 环节项会动态添加到这里 -->
							<div style="text-align: center; padding: 40px; color: #999;">
								选择直播流后，将显示该流的辩论流程
							</div>
						</div>

						<!-- 保存按钮 -->
						<div style="margin-top: 30px; text-align: center; border-top: 1px solid #e9ecef; padding-top: 20px;">
							<button class="btn btn-success" id="save-debate-flow-btn" style="padding: 12px 40px; font-size: 16px; display: inline-flex; align-items: center; gap: 8px;">
								<span class="iconfont icon-check" style="font-size: 18px;">✓</span>
								保存流程配置
							</button>
						</div>
					</div>

					<!-- 预设模板 -->
					<div style="background: #f0f8ff; padding: 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #3498db;">
						<h4 style="margin: 0 0 15px 0; color: #0c5460; display: flex; align-items: center; gap: 8px;">
							<span class="iconfont icon-template" style="font-size: 18px;">📋</span>
							快速套用模板
						</h4>
						<div style="display: flex; gap: 10px; flex-wrap: wrap;">
							<button class="btn btn-secondary btn-sm" onclick="applyTemplate('standard')" style="padding: 8px 16px;">
								📊 标准辩论
							</button>
							<button class="btn btn-secondary btn-sm" onclick="applyTemplate('quick')" style="padding: 8px 16px;">
								⚡ 快速轮辩
							</button>
							<button class="btn btn-secondary btn-sm" onclick="applyTemplate('extended')" style="padding: 8px 16px;">
								🕐 extended辩论
							</button>
						</div>
					</div>

					<!-- 使用说明 -->
					<div style="background: #fff3cd; padding: 20px; border-radius: 8px; border-left: 4px solid #ffc107;">
						<h4 style="margin: 0 0 10px 0; color: #856404; display: flex; align-items: center; gap: 8px;">
							<span class="iconfont icon-help" style="font-size: 18px;">❓</span>
							使用说明
						</h4>
						<div style="color: #856404; font-size: 14px; line-height: 1.8;">
							<ul style="margin: 10px 0; padding-left: 20px;">
								<li>为每个环节设置名称和时长（秒数）</li>
								<li>可以添加或删除环节，调整辩论流程</li>
								<li>时长单位为秒，例如 180 秒 = 3 分钟</li>
								<li>保存后将立即同步到大屏幕</li>
								<li>快速模板可快速填充常用流程</li>
								<li>每个直播流可以设置不同的辩论流程</li>
							</ul>
						</div>
					</div>
				</div>

				<!-- AI 内容管理页 -->
				<div id="ai-content" class="page">
					<div class="page-header">
						<h2>AI 内容管理</h2>
					</div>
					
				<!-- AI识别控制 -->
				<div style="background: white; padding: 25px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e9ecef;">
					<h3 style="margin: 0 0 20px 0; color: #2c3e50; display: flex; align-items: center; gap: 8px;">
						<img src="/static/iconfont/gongjigongju.png" class="icon-img" alt="">
						AI 识别控制
					</h3>
					
					<!-- 🔧 新增：直播流选择器 -->
					<div style="background: #d1ecf1; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #3498db; border: 1px solid #bee5eb;">
						<div class="form-group" style="margin: 0;">
							<label style="display: block; margin-bottom: 10px; color: #0c5460; font-weight: 500; display: flex; align-items: center; gap: 8px;">
								<img src="/static/iconfont/live.png" class="icon-img-sm" alt="">
								选择直播流（必选）
								<span style="color: #e74c3c; margin-left: 5px;">*</span>
							</label>
							<div style="display: flex; gap: 10px; align-items: center;">
								<select id="ai-stream-select" class="form-select" style="flex: 1; padding: 10px; font-size: 14px;">
									<option value="">请选择要操作的直播流</option>
								</select>
								<button class="btn btn-secondary btn-sm" id="ai-refresh-streams-btn" style="padding: 10px 15px; display: flex; align-items: center; gap: 6px;">
									<img src="/static/iconfont/shuaxin.png" class="icon-img-sm" alt="">
									刷新列表
								</button>
							</div>
							<div style="margin-top: 8px; font-size: 13px; color: #6c757d; display: flex; align-items: center; gap: 6px;">
								<span class="iconfont icon-tip" style="font-size: 16px;"></span>
								提示：启动和停止AI识别时将作用于选中的直播流
							</div>
						</div>
					</div>
					
					<div style="display: flex; gap: 20px; align-items: center; margin-bottom: 20px;">
						<div style="flex: 1;">
							<div style="font-size: 14px; color: #6c757d; margin-bottom: 5px;">当前状态</div>
							<div id="ai-status-display" style="font-size: 24px; font-weight: 600; color: #495057; display: flex; align-items: center; gap: 8px;">
								<span id="ai-status-icon" class="iconfont icon-circle" style="font-size: 20px;"></span>
								<span id="ai-status-text">未启动</span>
							</div>
							<div id="ai-current-stream-info" style="font-size: 13px; color: #6c757d; margin-top: 5px; display: none;">
								运行中的流：<span id="ai-running-stream-name">-</span>
							</div>
						</div>
						<div style="flex: 2; display: flex; gap: 10px; flex-wrap: wrap;">
							<button class="btn btn-success" id="start-ai-btn" style="padding: 12px 25px; display: flex; align-items: center; gap: 6px; justify-content: center;">
								<img src="/static/iconfont/bofang.png" class="icon-img-sm" style="filter: brightness(0) invert(1);" alt="">
								启动 AI 识别
							</button>
							<button class="btn btn-danger" id="stop-ai-btn" style="padding: 12px 25px; display: flex; align-items: center; gap: 6px; justify-content: center;" disabled>
								<span class="iconfont icon-stop" style="font-size: 16px;"></span>
								停止 AI 识别
							</button>
							<button class="btn btn-warning" id="pause-ai-btn" style="padding: 12px 25px; display: flex; align-items: center; gap: 6px; justify-content: center;" disabled>
								<span class="iconfont icon-pause" style="font-size: 16px;"></span>
								暂停 AI 识别
							</button>
							<button class="btn btn-info" id="resume-ai-btn" style="padding: 12px 25px; display: flex; align-items: center; gap: 6px; justify-content: center; display: none;">
								<span class="iconfont icon-play" style="font-size: 16px;"></span>
								恢复 AI 识别
							</button>
						</div>
					</div>
						
						<!-- AI设置（可选） -->
						<details style="margin-top: 20px;">
							<summary style="cursor: pointer; color: #495057; font-size: 14px; display: flex; align-items: center; gap: 6px;">
								<span class="iconfont icon-settings" style="font-size: 16px;"></span>
								高级设置（可选）
							</summary>
							<div style="margin-top: 15px; padding: 15px; background: #f5f5f5; border-radius: 8px;">
								<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
									<div class="form-group">
										<label>识别模式</label>
										<select id="ai-mode" class="form-select">
											<option value="realtime">实时识别</option>
											<option value="interval">定时识别</option>
										</select>
									</div>
									<div class="form-group">
										<label>敏感度</label>
										<select id="ai-sensitivity" class="form-select">
											<option value="low">低</option>
											<option value="medium">中</option>
											<option value="high" selected>高</option>
										</select>
									</div>
									<div class="form-group">
										<label>识别间隔（毫秒）</label>
										<input type="number" id="ai-interval" class="form-input" value="5000" min="1000" step="1000">
									</div>
									<div class="form-group">
										<label>最小置信度</label>
										<input type="number" id="ai-confidence" class="form-input" value="0.7" min="0" max="1" step="0.1">
									</div>
								</div>
							</div>
						</details>
					</div>
					
					<!-- AI内容列表 -->
					<div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); border: 1px solid #e9ecef;">
						<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
							<div style="flex: 1;">
								<h3 style="margin: 0 0 8px 0; color: #2c3e50; display: flex; align-items: center; gap: 8px;">
									<img src="/static/iconfont/baogaozongjie.png" class="icon-img" alt="">
									AI 生成内容列表
								</h3>
								<div id="ai-content-stream-info" style="font-size: 13px; color: #6c757d; padding: 8px 12px; background: #d1ecf1; border-radius: 6px; display: none; border: 1px solid #bee5eb;">
									<span style="font-weight: 600;">当前显示：</span>
									<span id="ai-content-current-stream-name">-</span>
									<span style="color: #95a5a6; margin-left: 10px;">|</span>
									<span style="color: #95a5a6; margin-left: 10px;">提示：选择不同直播流可查看对应的AI内容</span>
								</div>
							</div>
							<div style="display: flex; gap: 10px; align-items: center;">
								<select id="ai-content-filter" class="form-select" style="width: auto;">
									<option value="all">全部内容</option>
									<option value="published">已发布</option>
									<option value="deleted">已删除</option>
								</select>
								<button class="btn btn-secondary" id="refresh-ai-content-btn" style="display: flex; align-items: center; gap: 6px;">
									<img src="/static/iconfont/shuaxin.png" class="icon-img-sm" alt="">
									刷新
								</button>
							</div>
						</div>
						
						<div class="ai-content-list" id="ai-content-list">
							<div style="text-align: center; padding: 40px; color: #999;">
								暂无AI内容，启动AI识别后将自动显示
							</div>
						</div>
						
						<!-- 分页 -->
						<div id="ai-content-pagination" style="display: none; margin-top: 20px; text-align: center;">
							<button class="btn btn-secondary" id="ai-prev-page" style="display: inline-flex; align-items: center; gap: 6px;">
								<span class="iconfont icon-arrow-left" style="font-size: 14px;"></span>
								上一页
							</button>
							<span id="ai-page-info" style="margin: 0 15px; color: #495057;">第 1 页</span>
							<button class="btn btn-secondary" id="ai-next-page" style="display: inline-flex; align-items: center; gap: 6px;">
								下一页
								<span class="iconfont icon-arrow-right" style="font-size: 14px;"></span>
							</button>
						</div>
					</div>
				</div>

				<!-- 评论查看弹窗 -->
				<div id="comments-modal" class="modal">
					<div class="modal-content">
						<div class="modal-header">
							<h3>用户评论</h3>
							<span class="modal-close" data-modal="comments-modal">&times;</span>
						</div>
						<div class="modal-body" style="max-height: 500px; overflow-y: auto;">
							<div id="comments-list">
								<!-- 评论列表由 JS 填充 -->
							</div>
						</div>
					</div>
				</div>

				<!-- 数据统计页 -->
				<div id="statistics" class="page">
					<div class="page-header">
						<h2>数据统计</h2>
						<div class="date-filter">
							<input type="date" id="date-from" class="date-input">
							<span>至</span>
							<input type="date" id="date-to" class="date-input">
							<button class="btn btn-secondary" id="filter-btn">查询</button>
						</div>
					</div>

					<div class="stats-cards">
						<div class="stat-card-large">
							<h3>投票分析</h3>
							<canvas id="vote-analysis-chart"></canvas>
						</div>
						<div class="stat-card-large">
							<h3>用户活跃度</h3>
							<canvas id="user-activity-chart"></canvas>
						</div>
					</div>
				</div>
			</div>
		</main>
	</div>

	<!-- 添加/编辑直播流弹窗 -->
	<div id="stream-modal" class="modal">
		<div class="modal-content">
			<div class="modal-header">
				<h3 id="stream-modal-title">添加直播流</h3>
				<span class="modal-close" id="close-stream-modal">&times;</span>
			</div>
			<div class="modal-body">
				<form id="stream-form">
					<input type="hidden" id="stream-id">
					
					<div class="form-group">
						<label>流名称 <span style="color: red;">*</span></label>
						<input type="text" id="stream-name" class="form-input" placeholder="例如：主直播间" required>
						<small style="color: #666; display: block; margin-top: 5px;">给这个直播流起一个容易识别的名称</small>
					</div>
					
					<div class="form-group">
						<label>流地址 <span style="color: red;">*</span></label>
						<input type="url" id="stream-url" class="form-input" placeholder="https://your-domain.com/live/stream.m3u8" required>
						<small style="color: #666; display: block; margin-top: 5px;">
							支持格式：HLS (.m3u8)、RTMP、FLV<br>
							推荐使用HTTPS的HLS地址
						</small>
					</div>
					
					<div class="form-group">
						<label>流类型 <span style="color: red;">*</span></label>
						<select id="stream-type" class="form-select" required>
							<option value="hls">HLS (.m3u8) - 推荐</option>
							<option value="rtmp">RTMP</option>
							<option value="flv">FLV</option>
						</select>
						<small style="color: #666; display: block; margin-top: 5px;">
							微信小程序推荐使用HLS格式
						</small>
					</div>
					
					<div class="form-group">
						<label>流描述</label>
						<textarea id="stream-description" class="form-textarea" placeholder="（可选）描述这个直播流的用途" rows="3"></textarea>
					</div>
					
					<div class="form-group" style="display: flex; align-items: center; gap: 10px;">
						<label style="margin: 0;">是否启用</label>
						<label class="switch">
							<input type="checkbox" id="stream-enabled" checked>
							<span class="slider"></span>
						</label>
						<small style="color: #666;">禁用后，该流将不会出现在可选列表中</small>
					</div>
					
					<div class="modal-actions" style="margin-top: 25px;">
						<button type="button" class="btn btn-secondary" id="cancel-stream-btn">取消</button>
						<button type="submit" class="btn btn-primary">
							<span id="save-stream-btn-text">保存</span>
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- 设置辩题弹窗 -->
	<div id="debate-modal" class="modal">
		<div class="modal-content">
			<div class="modal-header">
				<h3 id="debate-modal-title">设置辩题</h3>
				<span class="modal-close" id="close-debate-modal">&times;</span>
			</div>
			<div class="modal-body">
				<form id="debate-form">
					<input type="hidden" id="debate-stream-id">
					
					<div class="form-group">
						<label>辩题标题 <span style="color: red;">*</span></label>
						<input type="text" id="debate-title" class="form-input" placeholder="例如：我是彭于晏" required>
						<small style="color: #666; display: block; margin-top: 5px;">辩题的核心问题或主题</small>
					</div>
					
					<div class="form-group">
						<label>辩题描述</label>
						<textarea id="debate-description" class="form-textarea" placeholder="（可选）详细描述辩题背景和意义" rows="3"></textarea>
					</div>
					
					<div class="form-group">
						<label>正方立场 <span style="color: red;">*</span></label>
						<input type="text" id="debate-left-position" class="form-input" placeholder="例如：会按" required>
						<small style="color: #666; display: block; margin-top: 5px;">正方（左方）的立场观点</small>
					</div>
					
					<div class="form-group">
						<label>反方立场 <span style="color: red;">*</span></label>
						<input type="text" id="debate-right-position" class="form-input" placeholder="例如：不会按" required>
						<small style="color: #666; display: block; margin-top: 5px;">反方（右方）的立场观点</small>
					</div>
					
					<div class="form-group" style="display: flex; align-items: center; gap: 10px;">
						<label style="margin: 0;">是否激活</label>
						<label class="switch">
							<input type="checkbox" id="debate-is-active">
							<span class="slider"></span>
						</label>
						<small style="color: #666;">（激活后将作为当前辩题，同一时间只能有一个激活）</small>
					</div>
					
					<div class="modal-actions" style="margin-top: 25px;">
						<button type="button" class="btn btn-secondary" id="cancel-debate-btn">取消</button>
						<button type="button" class="btn btn-danger" id="delete-debate-btn" style="display: none;">删除辩题</button>
						<button type="submit" class="btn btn-primary">
							<span id="save-debate-btn-text">保存</span>
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- 选择用户作为评委的弹窗 -->
	<div id="select-user-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 10000; align-items: center; justify-content: center;">
		<div style="background: white; border-radius: 12px; max-width: 800px; width: 90%; max-height: 80vh; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
			<div style="padding: 20px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
				<h3 style="margin: 0; color: #2c3e50; display: flex; align-items: center; gap: 8px;">
					<img src="/static/iconfont/blue-user.png" class="icon-img" alt="">
					选择用户作为评委
				</h3>
				<button id="close-user-modal" style="background: none; border: none; font-size: 28px; color: #95a5a6; cursor: pointer; line-height: 1; padding: 0; width: 30px; height: 30px;">&times;</button>
			</div>
			<div style="padding: 20px;">
				<div class="form-group">
					<label>搜索用户</label>
					<input type="text" id="modal-user-search" class="form-input" placeholder="输入用户昵称或ID搜索...">
				</div>
				<div id="modal-users-list" style="max-height: 400px; overflow-y: auto; margin-top: 15px;">
					<div style="text-align: center; padding: 40px; color: #999;">
						加载用户列表中...
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="/admin/admin-api.js?v=2"></script>
	<script src="/admin/admin.js?v=2"></script>
	<script src="/admin/admin-events.js?v=2"></script>
	<script src="/admin/stream-management.js?v=2"></script>
	<script src="/admin/judges-management.js?v=1"></script>
	<script>
		// 初始化直播流管理模块
		document.addEventListener('DOMContentLoaded', () => {
			initStreamManagement();
			initJudgesManagement();
		});
	</script>
</body>
</html>

